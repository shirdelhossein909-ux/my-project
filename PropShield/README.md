# PropShield MVP (MT5 Expert Advisor)

این پوشه شامل نسخه اولیه اکسپرت `PropShield` برای MT5 است.

## ساختار ماژولار

- `PropShield.mq5` → هسته اکسپرت، مدیریت رویدادها و قفل‌ها.
- `Include/PropShield/PropTypes.mqh` → مدل داده قوانین پراپ.
- `Include/PropShield/PropRules.mqh` → بارگذاری ۵ پراپ سطح اول (نسخه سخت‌گیرانه‌تر).
- `Include/PropShield/RiskEngine.mqh` → کنترل DD روزانه، DD کلی، ریسک هر معامله.
- `Include/PropShield/CsvLogger.mqh` → ثبت لاگ CSV روزانه.
- `Include/PropShield/UIPanel.mqh` → پنل گرافیکی حرفه‌ای، دکمه‌ها، حالت Fullscreen و افکت Hover.

## رفتار کلیدی

1. با شروع EA، پنل انتخاب پراپ نمایش داده می‌شود.
2. با انتخاب پراپ، قوانین همان پراپ لود و قفل می‌شوند.
3. پس از اولین معامله **از زمان attach شدن EA** تنظیمات کاملاً قفل می‌شود.
4. اگر DD روزانه/کلی نقض شود، تمام پوزیشن‌ها بسته و ترید قفل می‌شود.
5. اگر پوزیشن بدون SL یا با ریسک بیشتر از حد مجاز باشد، پوزیشن بسته و اکانت قفل می‌شود.
6. رویدادها در فایل CSV روزانه با پیشوند `PropShield_YYYY-MM-DD.csv` ذخیره می‌شوند.

## UI نسخه جدید

- پنل به گوشه راست-بالا منتقل شده تا روی نوار Buy/Sell و ابزارهای معاملاتی قرار نگیرد.
- دکمه `Fullscreen` برای باز کردن پنل کامل و نمایش نمودار رشد حساب (Equity/PnL sparkline) اضافه شده است.
- دکمه‌های انتخاب پراپ استایل بهتری دارند: فاصله بیشتر، سایه خفیف، افکت Hover و بزرگ‌نمایی ملایم.

## نکات نسخه MVP

- اسامی ۵ پراپ در این نسخه قابل ویرایش هستند و در `PropRules.mqh` تعریف شده‌اند.
- در نسخه‌های بعدی می‌توان نمودار تصویری پیشرفته‌تر، تم‌های UI، قوانین مرحله‌ای و API همگام‌سازی اضافه کرد.
